<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · PolyhedralRelaxations</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="https://fonts.googleapis.com/css?family=Montserrat|Source+Code+Pro&amp;display=swap" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PolyhedralRelaxations</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Basic-Usage"><span>Basic Usage</span></a></li><li><a class="tocitem" href="#API-for-the-MILP/LP-Relaxation-for-Nonlinear-Univariate-function"><span>API for the MILP/LP Relaxation for Nonlinear Univariate function</span></a></li><li><a class="tocitem" href="#API-for-the-MILP/LP-Relaxation-for-Bilinear-Term"><span>API for the MILP/LP Relaxation for Bilinear Term</span></a></li><li><a class="tocitem" href="#Additional-Algorithms-for-Relaxations-of-Univariate-Functions"><span>Additional Algorithms for Relaxations of Univariate Functions</span></a></li><li><a class="tocitem" href="#Tolerance-parameters"><span>Tolerance parameters</span></a></li></ul></li><li><a class="tocitem" href="../interface/">Interfacing with JuMP</a></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sujeevraja/PolyhedralRelaxations.jl/blob/master/docs/src/api.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h2 id="Basic-Usage"><a class="docs-heading-anchor" href="#Basic-Usage">Basic Usage</a><a id="Basic-Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Usage" title="Permalink"></a></h2><p>Here is an example illustrating the basic API for univariate functions.</p><pre><code class="language-julia hljs">using PolyhderalRelaxations, JuMP
m = Model() 
@variable(m, -1.0 &lt;= x &lt;= 1.0)
@variable(m, y)
f = x -&gt; x^3
construct_univariate_relaxation!(m, f, x, y, [-1.0, 0.0, 1.0], true)</code></pre><p>For bilinear functions, the basic API is as follows:</p><pre><code class="language-julia hljs">using PolyhderalRelaxations, JuMP
m = Model() 
@variable(m, -1.0 &lt;= x &lt;= 1.0)
@variable(m, -10.0 &lt;= y &lt;= 12.0)
@variable(m, z)
construct_bilinear_relaxation!(m, x, y, z, [-1.0, 1.0], [-10.0, 12.0])</code></pre><p>If there is only one partition (like above) for each variable, then the function formulates the McCormick relaxation. The package supports more than one partition only one of the variables <code>x</code> or <code>y</code>. Support for multi-variable partitioning will be added in the future versions. The following example illustrates the API for more than one partitions on the <code>x2</code> variable:</p><pre><code class="language-julia hljs">using PolyhderalRelaxations, JuMP
m = Model() 
@variable(m, -1.0 &lt;= x1 &lt;= 1.0)
@variable(m, -1.0 &lt;= x2 &lt;= 1.0)
@variable(m, z)
construct_bilinear_relaxation!(m, x1, x2, z, [-1.0, 1.0], [-1.0, -0.25, 0.25, 1.0])</code></pre><p>For examples, the reader is referred to the unit tests in the <code>test/</code> folder of the GitHub repository. </p><h2 id="API-for-the-MILP/LP-Relaxation-for-Nonlinear-Univariate-function"><a class="docs-heading-anchor" href="#API-for-the-MILP/LP-Relaxation-for-Nonlinear-Univariate-function">API for the MILP/LP Relaxation for Nonlinear Univariate function</a><a id="API-for-the-MILP/LP-Relaxation-for-Nonlinear-Univariate-function-1"></a><a class="docs-heading-anchor-permalink" href="#API-for-the-MILP/LP-Relaxation-for-Nonlinear-Univariate-function" title="Permalink"></a></h2><p>The API documentation for both the MILP and the LP relaxations for a given nonlinear univariate function is as follows:</p><article class="docstring"><header><a class="docstring-binding" id="PolyhedralRelaxations.construct_univariate_relaxation!" href="#PolyhedralRelaxations.construct_univariate_relaxation!"><code>PolyhedralRelaxations.construct_univariate_relaxation!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">construct_univariate_relaxation!(m,f,x,y,x_partition;f_dash=x-&gt;ForwardDiff.derivative(f,x),error_tolerance=NaN64,length_tolerance=1e-6,derivative_tolerance=1e-6,num_additional_partitions=0)</code></pre><p>Add MILP relaxation of <code>y=f(x)</code> to given JuMP model and return an object with new variables and constraints.</p><p><strong>Mandatory Arguments</strong></p><ul><li><code>m::Jump.Model</code>: model to which relaxation is to be added.</li><li><code>f::Function</code>: function or oracle for which a polyhedral relaxation is   required, usually non-linear.</li><li><code>x::Jump.VariableRef</code>: JuMP variable for domain of <code>f</code>.</li><li><code>y::JuMP.VariableRef</code>: JuMP variable for evaluation of <code>f</code>.</li><li><code>x_partition::Vector{&lt;:Real}</code>: partition of the domain of <code>f</code>.</li><li><code>milp::Bool</code>: build MILP relaxation if true, LP relaxation otherwise. Note   that the MILP relaxation uses the incremental formulation presented in the   paper, but the LP relaxation uses a lambda form that builds a formulation   as the convex combination of triangle vertices that are at the intersection   of tangents to the curve.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>f_dash::Function</code>: function or oracle for derivative of <code>f</code>, defaults to    the <code>derivative</code> function from the <code>ForwardDiff</code> package.</li><li><code>error_tolerance::Float64</code>: Maximum allowed vertical distance between over   and under estimators of <code>f</code>, defaults to NaN64.</li><li><code>length_tolerance::Float64</code>: maximum length of a sub-interval in a partition,   defaults to <span>$1 \times 10^{-6}$</span>.</li><li><code>derivative_tolerance::Float64</code>: minimum absolute difference between   derivaties at successive elements of a partition for them to be considered   different, defaults to <span>$1 \times 10^{-6}$</span>. If the difference of a partition sub-interval   is smaller than this value, that sub-interval will be refined.</li><li><code>num_additional_partitions::Int64</code>: budget on number of sub-intervals in   partition, defaults to 0. Note that if the number of partitions is <code>n</code> and   the number of additional partitions is <code>m</code>, then the function will return a   relaxation with at most <code>n+m</code> partitions.</li><li><code>variable_pre_base_name::AbstractString</code>: base_name that needs to be added to the auxiliary   variables for meaningful LP files</li></ul><p>Assume that:</p><ul><li><code>f</code> is a bounded function of 1 variable.</li><li><code>x_partition</code> is a partition of the domain of <code>f</code> such that <code>f</code> is either   convex or concave each sub-interval of the partition.</li><li><code>f_dash</code> is not equal at two consecutive elements of <code>x_partition</code>.</li></ul><p>This function builds an incremental formulation, which is the formulation presented in the paper.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sujeevraja/PolyhedralRelaxations.jl/blob/374eaf3104399311ecf1f92abc8301f6d2fc8ab8/src/api.jl#L3-L48">source</a></section></article><p>The derivate of the function is an optional keyword argument. If the derivate is not specified, the package invokes <code>ForwardDiff.jl</code> to compute the derivative.</p><h2 id="API-for-the-MILP/LP-Relaxation-for-Bilinear-Term"><a class="docs-heading-anchor" href="#API-for-the-MILP/LP-Relaxation-for-Bilinear-Term">API for the MILP/LP Relaxation for Bilinear Term</a><a id="API-for-the-MILP/LP-Relaxation-for-Bilinear-Term-1"></a><a class="docs-heading-anchor-permalink" href="#API-for-the-MILP/LP-Relaxation-for-Bilinear-Term" title="Permalink"></a></h2><p>The API for both the MILP and the LP relaxations for a bilinear term is as follows:</p><article class="docstring"><header><a class="docstring-binding" id="PolyhedralRelaxations.construct_bilinear_relaxation!" href="#PolyhedralRelaxations.construct_bilinear_relaxation!"><code>PolyhedralRelaxations.construct_bilinear_relaxation!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">construct_bilinear_relaxation!(m,x,y,z,x_partition,y_partition)</code></pre><p>Add polyhedral relaxation of <code>z = xy</code> to given JuMP model and return an object with new variables and constraints.</p><p><strong>Mandatory Arguments</strong></p><ul><li><code>m::Jump.Model</code>: model to which relaxation is to be added.</li><li><code>x::Jump.VariableRef</code>: JuMP variable <code>x</code>.</li><li><code>y::JuMP.VariableRef</code>: JuMP variable <code>y</code>.</li><li><code>z::JuMP.VariableRef</code>: JuMP variable <code>z</code>.</li><li><code>x_partition::Vector{&lt;:Real}</code>: partition of the domain of <code>x</code>.</li><li><code>y_partition::Vector{&lt;:Real}</code>: partition of the domain of <code>y</code>.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>variable_pre_base_name::AbstractString</code>: base_name that needs to be added to the auxiliary   variables for meaningful LP files</li></ul><p>This function builds an incremental formulation, and currently supports more than  one partition only on one of the variables <code>x</code> or <code>y</code> and not on both. It will  throw an error when more than one partitions are provided on both variables.  When exactly one partition is input for both variables, it populates the model  with the McCormick relaxation. The incremental formulation is similar to the triangle  chain relaxation in the manuscript with the triangles replaced with tetrahedrons.  Adjacent tetrahedrons share an edge (instead of a point in the triangles case). </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sujeevraja/PolyhedralRelaxations.jl/blob/374eaf3104399311ecf1f92abc8301f6d2fc8ab8/src/api.jl#L82-L108">source</a></section></article><h2 id="Additional-Algorithms-for-Relaxations-of-Univariate-Functions"><a class="docs-heading-anchor" href="#Additional-Algorithms-for-Relaxations-of-Univariate-Functions">Additional Algorithms for Relaxations of Univariate Functions</a><a id="Additional-Algorithms-for-Relaxations-of-Univariate-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Additional-Algorithms-for-Relaxations-of-Univariate-Functions" title="Permalink"></a></h2><p>Apart from providing MILP and LP relaxations of graphs of univariate function <span>$y=f(x)$</span> for a given partition, the package also implements some basic partitioning algorithms to refine the partition and provide tighter relaxations. Given a partition, PolyhedralRelaxations.jl can refine the partition using an interval-bisection algorithm detailed in the following reference: </p><ul><li>K. Sundar, S. Sanjeevi, and H, Nagarajan (2020). Sequence of Polyhedral Relaxations for Nonlinear Univariate Functions. (<a href="https://arxiv.org/abs/2005.13445">arxiv link</a>)</li></ul><p>The partition refinement scheme is equipped with multiple stopping criteria that can be toggled by setting non-default values to the following keyword arguments in the standard API:</p><ol><li><p><code>error_tolerance</code>: this parameter measures the maximum vertical distance between the under- and over-estimators of the relaxation within the domain of the univariate function. By default, this value is set to <code>NaN64</code>. Setting a non-zero positive value for this parameter would result partition and a corresponding relaxation such that the maximum vertical distance between the under- and over-estimators of the relaxation is at most the value prescribed by <code>error_tolerance</code>. </p></li><li><p><code>num_additional_partitions</code>: this parameter as the name suggests will refine the partition using the interval bisection algorithm till the total number of additional partitions reaches this number. It&#39;s default value is set to 0. </p></li></ol><p>The refinement algorithm will stop if either of the above two stopping criteria is satisfied. </p><h2 id="Tolerance-parameters"><a class="docs-heading-anchor" href="#Tolerance-parameters">Tolerance parameters</a><a id="Tolerance-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Tolerance-parameters" title="Permalink"></a></h2><p>The main functions to produce the relaxations are also equipped with the following two tolerance parameters:</p><ol><li><p><code>length_tolerance</code>: this parameter is used to control the refinement algorithm. A partition whose length is less than the <code>length_tolerance</code> is not partitioned further. The default value of this parameter is <span>$\epsilon = 1 \times 10^{-6}$</span>.</p></li><li><p><code>derivative_tolerance</code>: when the refinement algorithm is used with the <code>base_partition</code> not containing the inflection points of the function in its domain, the resulting relaxations will be erroneous i.e., there is no guarantee that the relaxation obtained is even valid. One necessary condition to detect this issue is by ensuring that the derivatives at successive partition points are not equal. This condition is checked up to the tolerance specified by this parameter. The default value of this parameter is <span>$\epsilon = 1 \times 10^{-6}$</span>.</p></li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../interface/">Interfacing with JuMP »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.21 on <span class="colophon-date" title="Thursday 21 July 2022 15:46">Thursday 21 July 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
